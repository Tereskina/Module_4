<html>
	<head>
		<meta charset='utf-8'>
		<title>Гороскоп на сегодня</title>
		<link 
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
			rel="stylesheet" 
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
			crossorigin="anonymous"/>
	    <link 
	    	rel="stylesheet" 
	    	type="text/css" 
	    	href="styles.css"/>
		<script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
	</head>

	<body>
		<div class="container">
			<h1 onclick="update_prediction();">Что день сегодняшний готовит</h1>

			<div class="row">
				<div class="col sentence" id="p-0">
				</div>
				<div class="col sentence" id="p-1">
				</div>
				<div class="col sentence" id="p-2">
				</div>
			</div>
			<div class="row">
				<div class="col sentence" id="p-3">
				</div>
				<div class="col sentence" id="p-4">
				</div>
				<div class="col sentence" id="p-5">
				</div>
			</div>
		</div>	
	</body>
	<script language="javascript">
			function set_content_in_divs(paragraphs) {
				$.each(paragraphs, function(i, d) {
			    p = $("#p-" + i)
			    p.html("<p>" + d + "</p>")
				})
			}

			function update_prediction() {
				// 1. load json
				// http://localhost:8080/api/forecasts
				//predictions = $.getJSON("http://localhost:8080/api/forecasts");
				// prediction = {
				//	             ... , ..., ..., 
			    //               responseJSON : {
			    //				    'prophecies' : ['1', '2', '3']
			    //                 }
			    //              }
				// predictions = {'prophecies' : ['1', '2', '3']}

				// dictionary = {'a' : ['...', '...', '...']}
				// dictionary['a']
				// 2. set_content_in_divs
				$.getJSON("http://sf-pyw.mosyag.in/m04/api/forecasts", function(datadata) {
					//console.log('123');
					//console.log(datadata);
					set_content_in_divs(datadata["prophecies"]);
				});

				//console.log('456');
				//console.log(predictions); 
			}
		</script>
</html>
